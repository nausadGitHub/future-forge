"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1734],{1734:(W,g,s)=>{s.r(g),s.d(g,{default:()=>B});var c=s(6895),t=s(4650),d=s(2078),O=s(9653),m=s(5439),P=s(1135),f=s(4004),E=s(8505),p=s(262),M=s(9646),D=s(7517),h=s(6609),C=s(6914),T=s(1531),y=s(6188),A=s(8076),v=s(764);function I(_,u){if(1&_&&(t.TgZ(0,"ion-list"),t._UZ(1,"user-item",3),t.ALo(2,"async"),t.qZA()),2&_){const e=t.oxw();let n;t.xp6(1),t.Q6J("users",null==(n=t.lcZ(2,1,e.users_recent_chats$))?null:n.users)}}function L(_,u){1&_&&t._UZ(0,"user-skeleton")}const R=function(){return[0,1,2,3,4,5]};function U(_,u){1&_&&(t.TgZ(0,"ion-list"),t.YNc(1,L,1,0,"user-skeleton",4),t.qZA()),2&_&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,R)))}function x(_,u){1&_&&t._UZ(0,"user-item-empty")}let B=(()=>{class _{constructor(){this.store=(0,t.f3M)(O.yh),this.async=(0,t.f3M)(c.Ov),this.ngZone=(0,t.f3M)(t.R0b),this.auth=(0,t.f3M)(D.$),this.size_users_recent_chats$=new P.X({page:1,totalPages:0,totalResults:0,limit:20,query:null==h.xR?void 0:h.xR.query}),this.users_recent_chats$=this.store.select(C.AP).pipe((0,f.U)(e=>Object.assign(Object.assign({},e),{users:null==e?void 0:e.users.map(n=>{var l,i,a,r;return Object.assign(Object.assign({},n),{userStatus:(null==n?void 0:n.userStatus)||"Offline",unread:(null===(i=null===(l=null==n?void 0:n.chats[0])||void 0===l?void 0:l.unread)||void 0===i?void 0:i.length)||0,chats:null===(r=null===(a=null==n?void 0:n.chats[0])||void 0===a?void 0:a.recent_chat)||void 0===r?void 0:r.map(o=>Object.assign(Object.assign({},o),{time:m(new Date(`${null==o?void 0:o.date} ${null==o?void 0:o.time}`)).format("hh:mm a")}))})})})),(0,E.b)(e=>this.ngZone.run(()=>this.size_users_recent_chats$.next(Object.assign({},e)))),(0,p.K)(()=>(0,M.of)(h.xR))),this.track_users=(e,n)=>null==n?void 0:n.userID,this.scroll_recent_chats_users=e=>{var n,l,i,a,r;if((null===(n=this.async.transform(this.size_users_recent_chats$))||void 0===n?void 0:n.page)!==(null===(l=this.async.transform(this.size_users_recent_chats$))||void 0===l?void 0:l.totalPages)){const o=null===(i=this.async.transform(this.size_users_recent_chats$))||void 0===i?void 0:i.query;o.page=(+o.page+1).toString(),o.pagesize=o.pagesize,this.store.dispatch(v.load_initial_users$({query:o})),setTimeout(()=>{e.target.complete()},1e3)}(null===(a=this.async.transform(this.size_users_recent_chats$))||void 0===a?void 0:a.page)===(null===(r=this.async.transform(this.size_users_recent_chats$))||void 0===r?void 0:r.totalPages)&&(e.target.disabled=!0)}}ionViewWillEnter(){this.store.dispatch(v.load_initial_users$({query:{userID:"C2oozLrjU",searchword:"",pagesize:"20",page:"1",sortBy:""}}))}}return _.\u0275fac=function(e){return new(e||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["status-user"]],standalone:!0,features:[t._Bn([c.Ov]),t.jDz],decls:10,vars:11,consts:[[4,"ngIf"],["position","bottom","threshold","20%",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Loading more data..."],[3,"users"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e&&(t.TgZ(0,"ion-content"),t.YNc(1,I,3,3,"ion-list",0),t.ALo(2,"async"),t.YNc(3,U,2,2,"ion-list",0),t.ALo(4,"async"),t.YNc(5,x,1,0,"user-item-empty",0),t.ALo(6,"async"),t.ALo(7,"async"),t.TgZ(8,"ion-infinite-scroll",1),t.NdJ("ionInfinite",function(i){return n.scroll_recent_chats_users(i)}),t._UZ(9,"ion-infinite-scroll-content",2),t.qZA()()),2&e){let l,i,a;t.xp6(1),t.Q6J("ngIf",!(null!=(l=t.lcZ(2,3,n.users_recent_chats$))&&l.isSearch)),t.xp6(2),t.Q6J("ngIf",null==(i=t.lcZ(4,5,n.users_recent_chats$))?null:i.isSearch),t.xp6(2),t.Q6J("ngIf",!(null!=(a=t.lcZ(6,7,n.users_recent_chats$))&&a.isSearch)&&0===(null==(a=t.lcZ(7,9,n.users_recent_chats$))?null:a.users.length))}},dependencies:[d.Pc,d.W2,d.ju,d.MB,d.q_,c.ez,c.sg,c.O5,c.Ov,A.r,y.m,T.z],styles:["ion-item[_ngcontent-%COMP%]{--min-height: 5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .titlle[_ngcontent-%COMP%]{font-style:normal;font-weight:500;font-size:18px;color:#fff}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-style:normal;font-weight:400;font-size:12px;color:#fff}ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:45px;height:45px}"]}),_})()}}]);