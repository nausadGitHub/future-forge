"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4993],{4993:(Z,g,e)=>{e.r(g),e.d(g,{default:()=>W});var u=e(6895),t=e(4650),r=e(2078),E=e(8076),m=e(764),O=e(9653),P=e(7517),f=e(1135),p=e(4004),M=e(8505),D=e(262),C=e(9646),h=e(6609),R=e(6914),v=e(5439),T=e(6188),A=e(1531);function I(_,d){if(1&_&&(t.TgZ(0,"ion-list"),t._UZ(1,"user-item",5),t.ALo(2,"async"),t.qZA()),2&_){const n=t.oxw();let s;t.xp6(1),t.Q6J("users",null==(s=t.lcZ(2,1,n.users_recent_chats$))?null:s.users)}}function y(_,d){1&_&&t._UZ(0,"user-skeleton")}const L=function(){return[0,1,2,3,4,5]};function U(_,d){1&_&&(t.TgZ(0,"ion-list"),t.YNc(1,y,1,0,"user-skeleton",6),t.qZA()),2&_&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,L)))}function B(_,d){1&_&&t._UZ(0,"user-item-empty")}let W=(()=>{class _{constructor(){this.store=(0,t.f3M)(O.yh),this.async=(0,t.f3M)(u.Ov),this.ngZone=(0,t.f3M)(t.R0b),this.auth=(0,t.f3M)(P.$),this.size_users_recent_chats$=new f.X({page:1,totalPages:0,totalResults:0,limit:20,query:null==h.xR?void 0:h.xR.query}),this.users_recent_chats$=this.store.select(R.AP).pipe((0,p.U)(n=>Object.assign(Object.assign({},n),{users:null==n?void 0:n.users.map(s=>{var l,i,a,c;return Object.assign(Object.assign({},s),{userStatus:(null==s?void 0:s.userStatus)||"Offline",unread:(null===(i=null===(l=null==s?void 0:s.chats[0])||void 0===l?void 0:l.unread)||void 0===i?void 0:i.length)||0,chats:null===(c=null===(a=null==s?void 0:s.chats[0])||void 0===a?void 0:a.recent_chat)||void 0===c?void 0:c.map(o=>Object.assign(Object.assign({},o),{time:v(new Date(`${null==o?void 0:o.date} ${null==o?void 0:o.time}`)).format("hh:mm a")}))})})})),(0,M.b)(n=>this.ngZone.run(()=>this.size_users_recent_chats$.next(Object.assign({},n)))),(0,D.K)(()=>(0,C.of)(h.xR))),this.track_users=(n,s)=>null==s?void 0:s.userID,this.scroll_recent_chats_users=n=>{var s,l,i,a,c;if((null===(s=this.async.transform(this.size_users_recent_chats$))||void 0===s?void 0:s.page)!==(null===(l=this.async.transform(this.size_users_recent_chats$))||void 0===l?void 0:l.totalPages)){const o=null===(i=this.async.transform(this.size_users_recent_chats$))||void 0===i?void 0:i.query;o.page=(+o.page+1).toString(),o.pagesize=o.pagesize,this.store.dispatch(m.load_initial_users$({query:o})),setTimeout(()=>{n.target.complete()},1e3)}(null===(a=this.async.transform(this.size_users_recent_chats$))||void 0===a?void 0:a.page)===(null===(c=this.async.transform(this.size_users_recent_chats$))||void 0===c?void 0:c.totalPages)&&(n.target.disabled=!0)}}ionViewWillEnter(){this.store.dispatch(m.load_initial_users$({query:{userID:"C2oozLrjU",searchword:"",pagesize:"20",page:"1",sortBy:""}}))}}return _.\u0275fac=function(n){return new(n||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["recent-chat-user"]],standalone:!0,features:[t._Bn([u.Ov]),t.jDz],decls:13,vars:11,consts:[[4,"ngIf"],["position","bottom","threshold","20%",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Loading more data..."],["slot","fixed","vertical","bottom","horizontal","end","mode","ios"],["color","light","name","layers-outline"],[3,"users"],[4,"ngFor","ngForOf"]],template:function(n,s){if(1&n&&(t.TgZ(0,"ion-content"),t.YNc(1,I,3,3,"ion-list",0),t.ALo(2,"async"),t.YNc(3,U,2,2,"ion-list",0),t.ALo(4,"async"),t.YNc(5,B,1,0,"user-item-empty",0),t.ALo(6,"async"),t.ALo(7,"async"),t.TgZ(8,"ion-infinite-scroll",1),t.NdJ("ionInfinite",function(i){return s.scroll_recent_chats_users(i)}),t._UZ(9,"ion-infinite-scroll-content",2),t.qZA(),t.TgZ(10,"ion-fab",3)(11,"ion-fab-button"),t._UZ(12,"ion-icon",4),t.qZA()()()),2&n){let l,i,a;t.xp6(1),t.Q6J("ngIf",!(null!=(l=t.lcZ(2,3,s.users_recent_chats$))&&l.isSearch)),t.xp6(2),t.Q6J("ngIf",null==(i=t.lcZ(4,5,s.users_recent_chats$))?null:i.isSearch),t.xp6(2),t.Q6J("ngIf",!(null!=(a=t.lcZ(6,7,s.users_recent_chats$))&&a.isSearch)&&0===(null==(a=t.lcZ(7,9,s.users_recent_chats$))?null:a.users.length))}},dependencies:[r.Pc,r.W2,r.IJ,r.W4,r.gu,r.ju,r.MB,r.q_,u.ez,u.sg,u.O5,u.Ov,E.r,T.m,A.z],data:{animation:[]}}),_})()}}]);